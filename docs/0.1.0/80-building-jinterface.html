<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Building JInterface for Clojure</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">jiface</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10-low-level-api.html"><div class="inner"><span>Clojang User's Guide: The Low-level API</span></div></a></li><li class="depth-1  current"><a href="80-building-jinterface.html"><div class="inner"><span>Building JInterface for Clojure</span></div></a></li><li class="depth-1 "><a href="98-other-resources.html"><div class="inner"><span>Other Resources</span></div></a></li><li class="depth-1 "><a href="99-other-versions.html"><div class="inner"><span>API Docs (All Versions)</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jiface</span></div></div></li><li class="depth-2"><a href="jiface.erlang.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>erlang</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.atom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>atom</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.float.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>float</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.int.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>int</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.list.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>list</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.object.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>object</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.pid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pid</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.port.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>port</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.string.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.tuple.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tuple</span></div></a></li><li class="depth-3"><a href="jiface.erlang.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-2"><a href="jiface.otp.html"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>otp</span></div></a></li><li class="depth-3 branch"><a href="jiface.otp.connection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connection</span></div></a></li><li class="depth-3 branch"><a href="jiface.otp.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch"><a href="jiface.otp.nodes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nodes</span></div></a></li><li class="depth-3 branch"><a href="jiface.otp.streams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>streams</span></div></a></li><li class="depth-3"><a href="jiface.otp.transport.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transport</span></div></a></li><li class="depth-2"><a href="jiface.util.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#building-jinterface-for-clojure" name="building-jinterface-for-clojure"></a>Building JInterface for Clojure</h1>
<h2><a href="#erlang-and-jinterface" name="erlang-and-jinterface"></a>Erlang and JInterface</h2>
<p>Getting Erlang, JInterface, and Clojure working together can be tricky just for the simple fact that the JInterface <code>.jar</code> files tend to be a mismatched mess. I’ve <em>tried</em> to help out with this by publishing what <em>seem</em> to be working JInterface <code>.jar</code> files on Clojars. I don’t have the infrastructure available for testing all of these, so feedback is welcome.</p>
<p>To make this easier for devs to do themselves, this project includes some <code>make</code> targets for building JInterface <code>.jar</code> files. Also, a table is proivded below to help match Erlang VM with the right JInterface relase.</p>
<h3><a href="#a-note-on-versions" name="a-note-on-versions"></a>A Note on Versions</h3>
<p>JInterface is only guaranteed to work with the version of Erlang with which it was released. The following version numbers are paired:</p>
<table>
  <thead>
    <tr>
      <th>Erlang Release </th>
      <th>Erlang Version (erts) </th>
      <th>JInterface </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>18.2 </td>
      <td>7.2 </td>
      <td>1.6.1 </td>
    </tr>
    <tr>
      <td>18.1 </td>
      <td>7.1 </td>
      <td>1.6 </td>
    </tr>
    <tr>
      <td>18.0 </td>
      <td>7.0 </td>
      <td>1.6 </td>
    </tr>
    <tr>
      <td>17.5 </td>
      <td>6.4 </td>
      <td>1.5.12 </td>
    </tr>
    <tr>
      <td>17.4 </td>
      <td>6.3 </td>
      <td>1.5.11 </td>
    </tr>
    <tr>
      <td>17.3 </td>
      <td>6.2 </td>
      <td>1.5.10 </td>
    </tr>
    <tr>
      <td>17.2 </td>
      <td>6.1 </td>
      <td>1.5.9 </td>
    </tr>
    <tr>
      <td>17.1 </td>
      <td>6.1 </td>
      <td>1.5.9 </td>
    </tr>
    <tr>
      <td>17.0 </td>
      <td>6.0 </td>
      <td>1.5.9 </td>
    </tr>
    <tr>
      <td>R16B03 </td>
      <td>5.10.4 </td>
      <td>1.5.8 </td>
    </tr>
    <tr>
      <td>R16B02 </td>
      <td>5.10.3 </td>
      <td>1.5.8 </td>
    </tr>
    <tr>
      <td>R16B01 </td>
      <td>5.10.2 </td>
      <td>1.5.8 </td>
    </tr>
    <tr>
      <td>R16B </td>
      <td>5.10.1 </td>
      <td>1.5.8 </td>
    </tr>
    <tr>
      <td>R15B03 </td>
      <td>5.9.3 </td>
      <td>1.5.6 </td>
    </tr>
    <tr>
      <td>R15B02 </td>
      <td>5.9.2 </td>
      <td>1.5.6 </td>
    </tr>
    <tr>
      <td>R15B01 </td>
      <td>5.9.1 </td>
      <td>1.5.6 </td>
    </tr>
    <tr>
      <td>R15B </td>
      <td>5.9 </td>
      <td>1.5.5 </td>
    </tr>
  </tbody>
</table>
<h3><a href="#building-jinterface" name="building-jinterface"></a>Building JInterface</h3>
<p>To ensure that your version of JInterface is ready for use by Clojure with your version of Erlang, simply do this:</p>
<pre><code class="bash">$ make jinterface-local
</code></pre>
<p>This will discover the Erlang root directory for the first <code>erl</code> found in your <code>PATH</code>. It will also location the JInterface <code>.jar</code> file for that version of Erlang.</p>
<p>If you wish to override these, you may do the following:</p>
<pre><code class="bash">$ make jinterface-local ERL_LIBS=/opt/erlang/15.3.1
</code></pre>
<p>This <code>make</code> target (which depends upon Maven being installed) will generate a <code>lein</code>-friendly <code>.jar</code> file for you in your <code>~/.m2/repository</code> directory, just like <code>lein</code> does with downloaded Clojars.</p>
<h4><a href="#finding-your-root-dir" name="finding-your-root-dir"></a>Finding Your Root Dir</h4>
<p>If you don’t know what your Erlang root directory is, just fire up Erlang and do the following:</p>
<pre><code class="bash">$ erl
</code></pre>
<pre><code class="erlang">1&gt; code:root_dir().
"/opt/erlang/18.2"
</code></pre>
<p>The <code>Makefile</code> uses this to get the default Erlang root directory:</p>
<pre><code>ERL_LIBS=$(erl -eval "io:format(code:root_dir()),halt()" -noshell)
</code></pre>
<h4><a href="#getting-versions" name="getting-versions"></a>Getting Versions</h4>
<p>The <code>Makefile</code> provides a convenience target for getting some important version numbers:</p>
<pre><code class="bash">$ make show-versions
Project: clojang, 0.1.0
Erlang: Erlang/OTP 18 [erts-7.2] [source] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]
JInterface: 1.6.1
Clojure: 1.7.0
lein/JVM: Leiningen 2.5.3 on Java 1.7.0_91 OpenJDK 64-Bit Server VM
</code></pre></div></div></div></body></html>