<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>jiface.otp.messaging documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">jiface</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10-low-level-api.html"><div class="inner"><span>Clojang User's Guide: The Low-level API</span></div></a></li><li class="depth-1 "><a href="80-building-jinterface.html"><div class="inner"><span>Building JInterface for Clojure</span></div></a></li><li class="depth-1 "><a href="98-other-resources.html"><div class="inner"><span>Other Resources</span></div></a></li><li class="depth-1 "><a href="99-other-versions.html"><div class="inner"><span>API Docs (All Versions)</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jiface</span></div></div></li><li class="depth-2"><a href="jiface.erlang.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>erlang</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.atom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>atom</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.float.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>float</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.int.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>int</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.list.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>list</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.object.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>object</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.pid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pid</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.port.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>port</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.string.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string</span></div></a></li><li class="depth-3 branch"><a href="jiface.erlang.tuple.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tuple</span></div></a></li><li class="depth-3"><a href="jiface.erlang.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-2"><a href="jiface.otp.html"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>otp</span></div></a></li><li class="depth-3 branch"><a href="jiface.otp.connection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connection</span></div></a></li><li class="depth-3 branch current"><a href="jiface.otp.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch"><a href="jiface.otp.nodes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nodes</span></div></a></li><li class="depth-3 branch"><a href="jiface.otp.streams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>streams</span></div></a></li><li class="depth-3"><a href="jiface.otp.transport.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transport</span></div></a></li><li class="depth-2"><a href="jiface.util.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jiface.otp.messaging.html#var-mbox"><div class="inner"><span>mbox</span></div></a></li><li class="depth-1"><a href="jiface.otp.messaging.html#var-MboxObject"><div class="inner"><span>MboxObject</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>!</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-close"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>close</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-equal.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>equal?</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-exit"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exit</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-name"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-name</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-names"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-names</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-pid"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-pid</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-hash"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hash</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>link</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-ping"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ping</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-receive"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>receive</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-receive-buf"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>receive-buf</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-receive-msg"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>receive-msg</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-register-name"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>register-name</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-self"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>self</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-send"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>send</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-unlink"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unlink</span></div></a></li><li class="depth-2"><a href="jiface.otp.messaging.html#var-whereis"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>whereis</span></div></a></li><li class="depth-1"><a href="jiface.otp.messaging.html#var-msg-type-lookup"><div class="inner"><span>msg-type-lookup</span></div></a></li><li class="depth-1"><a href="jiface.otp.messaging.html#var-MsgObject"><div class="inner"><span>MsgObject</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-msg"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-msg</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-recipient"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-recipient</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-recipient-name"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-recipient-name</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-recipient-pid"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-recipient-pid</span></div></a></li><li class="depth-2 branch"><a href="jiface.otp.messaging.html#var-get-sender-pid"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-sender-pid</span></div></a></li><li class="depth-2"><a href="jiface.otp.messaging.html#var-get-type"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-type</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jiface.otp.messaging</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-mbox"><h3>mbox</h3><div class="usage"><code>(mbox node-instance)</code></div><div class="doc"><div class="markdown"><p>A wrapper for the mbox-creation method on nodes. See <code>clojang.jinterface.otp.nodes/node</code>.</p></div></div></div><div class="public anchor" id="var-MboxObject"><h3>MboxObject</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Provides a simple mechanism for exchanging messages with Erlang processes or other instances of this class.</p>
<p>Each mailbox is associated with a unique pid that contains information necessary for delivery of messages. When sending messages to named processes or mailboxes, the sender pid is made available to the recipient of the message. When sending messages to other mailboxes, the recipient can only respond if the sender includes the pid as part of the message contents. The sender can determine its own pid by calling <code>(self sndr)</code></p>
<p>Mailboxes can be named, either at creation or later. Messages can be sent to named mailboxes and named Erlang processes without knowing the pid that identifies the mailbox. This is neccessary in order to set up initial communication between parts of an application. Each mailbox can have at most one name.</p>
<p>Since this class was intended for communication with Erlang, all of the send methods take OtpErlangObject arguments. However this class can also be used to transmit arbitrary Java objects (as long as they implement one of <code>java.io.Serializable</code> or <code>java.io.Externalizable</code>) by encapsulating the object in a OtpErlangBinary.</p>
<p>Messages to remote nodes are externalized for transmission, and as a result the recipient receives a copy of the original Java object. To ensure consistent behaviour when messages are sent between local mailboxes, such messages are cloned before delivery.</p>
<p>Additionally, mailboxes can be linked in much the same way as Erlang processes. If a link is active when a mailbox is closed, any linked Erlang processes or OtpMboxes will be sent an exit signal. As well, exit signals will be (eventually) sent if a mailbox goes out of scope and its finalize() method called. However due to the nature of finalization (i.e. Java makes no guarantees about when finalize() will be called) it is recommended that you always explicitly close mailboxes if you are using links *in*nstead of relying on finalization to notify other parties in a timely manner.</p>
<p>When retrieving messages from a mailbox that has received an exit signal, an OtpErlangExit exception will be raised. Note that the exception is queued in the mailbox along with other messages, and will not be raised until it reaches the head of the queue and is about to be retrieved.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-.21"><h3>!</h3><div class="usage"><code>(! this recip-pid msg)</code><code>(! this mbox-name node-name msg)</code></div><div class="doc"><div class="markdown"><p>An alias for <code>send</code></p></div></div></div><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close this)</code></div><div class="doc"><div class="markdown"><p>Close the given mailbox.</p></div></div></div><div class="public anchor" id="var-equal.3F"><h3>equal?</h3><div class="usage"><code>(equal? this other-obj)</code></div><div class="doc"><div class="markdown"><p>Determine if two mailboxes are equal.</p></div></div></div><div class="public anchor" id="var-exit"><h3>exit</h3><div class="usage"><code>(exit this reason)</code><code>(exit this recip-pid reason)</code></div><div class="doc"><div class="markdown"><p>Close the given mailbox with a given reason or send an exit signal to a remote pid.</p></div></div></div><div class="public anchor" id="var-get-name"><h3>get-name</h3><div class="usage"><code>(get-name this)</code></div><div class="doc"><div class="markdown"><p>Get the registered name of this mailbox.</p></div></div></div><div class="public anchor" id="var-get-names"><h3>get-names</h3><div class="usage"><code>(get-names this)</code></div><div class="doc"><div class="markdown"><p>Get a list of all known registered names on the same node as this mailbox.</p></div></div></div><div class="public anchor" id="var-get-pid"><h3>get-pid</h3><div class="usage"><code>(get-pid this)</code></div><div class="doc"><div class="markdown"><p>Alias for <code>self</code>.</p></div></div></div><div class="public anchor" id="var-hash"><h3>hash</h3><div class="usage"><code>(hash this)</code></div><div class="doc"><div class="markdown"><p>Get the object hash code.</p></div></div></div><div class="public anchor" id="var-link"><h3>link</h3><div class="usage"><code>(link this)</code></div><div class="doc"><div class="markdown"><p>Link to a remote mailbox or Erlang process.</p></div></div></div><div class="public anchor" id="var-ping"><h3>ping</h3><div class="usage"><code>(ping this node-name)</code><code>(ping this node-name timeout)</code></div><div class="doc"><div class="markdown"><p>Create a connection to a remote node.</p></div></div></div><div class="public anchor" id="var-receive"><h3>receive</h3><div class="usage"><code>(receive this)</code><code>(receive this timeout)</code></div><div class="doc"><div class="markdown"><p>Block until a message (Erlang object) arrives for this mailbox, or if a timeout is given, wait for a message until the timeout has been reached.</p></div></div></div><div class="public anchor" id="var-receive-buf"><h3>receive-buf</h3><div class="usage"><code>(receive-buf this)</code><code>(receive-buf this timeout)</code></div><div class="doc"><div class="markdown"><p>Block until a message (Erlang input stream) arrives for this mailbox, or if a timeout is given, wait for a message until the timeout has been reached.</p></div></div></div><div class="public anchor" id="var-receive-msg"><h3>receive-msg</h3><div class="usage"><code>(receive-msg this)</code><code>(receive-msg this timeout)</code></div><div class="doc"><div class="markdown"><p>Block until a message (OTP message) arrives for this mailbox, or if a timeout is given, wait for a message until the timeout has been reached.</p></div></div></div><div class="public anchor" id="var-register-name"><h3>register-name</h3><div class="usage"><code>(register-name this mbox-name)</code></div><div class="doc"><div class="markdown"><p>Register or remove a name for this mailbox.</p></div></div></div><div class="public anchor" id="var-self"><h3>self</h3><div class="usage"><code>(self this)</code></div><div class="doc"><div class="markdown"><p>Get the identifying <code>pid</code> associated with the given mailbox.</p></div></div></div><div class="public anchor" id="var-send"><h3>send</h3><div class="usage"><code>(send this recip-pid msg)</code><code>(send this mbox-name node-name msg)</code></div><div class="doc"><div class="markdown"><p>Send a message to a remote <code>pid</code>, representing either another mailbox or an Erlang process or to a remote node by mailbox name and node name.</p></div></div></div><div class="public anchor" id="var-unlink"><h3>unlink</h3><div class="usage"><code>(unlink this recip-pid)</code></div><div class="doc"><div class="markdown"><p>Remove a link to a remote mailbox or Erlang process.</p></div></div></div><div class="public anchor" id="var-whereis"><h3>whereis</h3><div class="usage"><code>(whereis this mbox-name)</code></div><div class="doc"><div class="markdown"><p>Determine the pid corresponding to a registered name on this node.</p></div></div></div></div></div></div><div class="public anchor" id="var-msg-type-lookup"><h3>msg-type-lookup</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-MsgObject"><h3>MsgObject</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Provides a carrier for Erlang messages.</p>
<p>Instances of this class are created to package header and payload information in received Erlang messages so that the recipient can obtain both parts with a single call to receiveMsg().</p>
<p>The header information that is available is as follows:</p>
<ul>
  <li>a tag indicating the type of message</li>
  <li>the intended recipient of the message, either as a pid or as a String, but  never both.</li>
  <li>(sometimes) the sender of the message. Due to some eccentric  characteristics of the Erlang distribution protocol, not all messages have  information about the sending process. In particular, only messages whose  tag is regSendTag contain sender information.</li>
</ul>
<p>Message are sent using the Erlang external format (see separate documentation). When a message is received and delivered to the recipient mailbox, the body of the message is still in this external representation until <code>get-msg</code> is called, at which point the message is decoded. A copy of the decoded message is stored in the OtpMsg so that subsequent calls to <code>get-msg</code> do not require that the message be decoded a second time.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-get-msg"><h3>get-msg</h3><div class="usage"><code>(get-msg this)</code></div><div class="doc"><div class="markdown"><p>Deserialize and return a new copy of the message contained in this <code>OtpMsg</code>.</p></div></div></div><div class="public anchor" id="var-get-recipient"><h3>get-recipient</h3><div class="usage"><code>(get-recipient this)</code></div><div class="doc"><div class="markdown"><p>Get the name of the recipient for this message, if it is a <code>regSendTag</code> message.</p></div></div></div><div class="public anchor" id="var-get-recipient-name"><h3>get-recipient-name</h3><div class="usage"><code>(get-recipient-name this)</code></div><div class="doc"><div class="markdown"><p>Get the name of the recipient for this message.</p></div></div></div><div class="public anchor" id="var-get-recipient-pid"><h3>get-recipient-pid</h3><div class="usage"><code>(get-recipient-pid this)</code></div><div class="doc"><div class="markdown"><p>Get the Pid of the recipient for this message, if it is a <code>sendTag</code> message.</p></div></div></div><div class="public anchor" id="var-get-sender-pid"><h3>get-sender-pid</h3><div class="usage"><code>(get-sender-pid this)</code></div><div class="doc"><div class="markdown"><p>Get the Pid of the sender of this message.</p></div></div></div><div class="public anchor" id="var-get-type"><h3>get-type</h3><div class="usage"><code>(get-type this)</code></div><div class="doc"><div class="markdown"><p>Get the type marker from this message.</p></div></div></div></div></div></div></div></body></html>